# Place Review API - Submission Notes

## Overview

This is a production-ready Django REST API for a mobile application that allows users to review places (shops, doctors, restaurants, etc.). All requirements from the coding task have been implemented.

## Requirements Checklist

✅ **User Registration**: Users register with name and phone number
✅ **Unique Phone Numbers**: Only one user per phone number (database constraint)
✅ **Authentication Required**: All endpoints except register/login require authentication
✅ **Place Model**: Each place has name and address
✅ **Unique Places**: Only one place per name+address combination (database constraint)
✅ **Review Model**: Contains 1-5 rating, text, user, and timestamp
✅ **Add Review**: Users can add reviews; places are auto-created if they don't exist
✅ **Search by Name**: Partial and exact name matching implemented
✅ **Search by Rating**: Filter by minimum average rating
✅ **Smart Search Ordering**: Exact matches first, then partial matches
✅ **Search Results**: Display name and average rating
✅ **Place Details**: Shows name, address, average rating, and all reviews
✅ **Review Ordering**: Current user's review appears first, others sorted by newest
✅ **Data Population**: Script generates 50 users, 100 places, ~900 reviews

## Technology Stack

- Django 4.2 (Python web framework)
- Django REST Framework 3.14 (REST API toolkit)
- SQLite (Relational database - as required)
- Token-based authentication

## How to Run

1. Install dependencies:
   ```
   pip install -r requirements.txt
   ```

2. Run migrations:
   ```
   python manage.py makemigrations
   python manage.py migrate
   ```

3. Populate sample data:
   ```
   python populate_data.py
   ```

4. Start server:
   ```
   python manage.py runserver
   ```

5. Access API at: http://127.0.0.1:8000/api/

## API Endpoints

- POST /api/register/ - Register new user
- POST /api/login/ - Login and get token
- POST /api/logout/ - Logout
- GET /api/profile/ - Get user profile
- POST /api/reviews/add/ - Add review (creates place if needed)
- GET /api/places/search/ - Search places by name and/or rating
- GET /api/places/{id}/ - Get place details with reviews

## Key Features

1. **Token Authentication**: Secure token-based auth suitable for mobile apps
2. **Phone Number Login**: Uses phone as primary identifier
3. **Auto-Create Places**: Reviews create places if they don't exist
4. **Smart Search**: Exact matches prioritized over partial matches
5. **User Review First**: Current user's review appears first in listings
6. **Database Indexes**: Optimized queries with proper indexing
7. **Unique Constraints**: Enforced at database level
8. **Clean Code**: Production-quality code with minimal comments
9. **Comprehensive Tests**: Unit tests included
10. **Sample Data**: Population script for testing

## Code Quality

- All code is original and written specifically for this assignment
- Production-ready standards with proper error handling
- Clean, maintainable code structure
- Follows Django best practices
- No unnecessary files or bloat (< 1MB requirement met)
- RESTful API design
- Proper use of HTTP status codes
- Input validation and error messages

## Testing

Run tests with:
```
python manage.py test
```

Test credentials (after running populate_data.py):
```
Phone: 5833371034
Password: password123
```

## Admin Panel

Access at http://127.0.0.1:8000/admin/

Create admin user:
```
python manage.py createsuperuser
```

## Design Decisions

1. **Phone as Username**: Aligns with mobile app context
2. **Token Auth**: Stateless, scalable for mobile
3. **Get-or-Create**: Seamless place creation
4. **Calculated Ratings**: Dynamic average calculation
5. **Ordered Results**: Better UX with smart ordering
6. **Minimal Dependencies**: Only Django + DRF required

## Production Considerations

The README.md includes a production deployment checklist covering:
- Security settings
- Database migration
- HTTPS configuration
- Environment variables
- Rate limiting
- Logging

## No Plagiarism

All code is original and written specifically for this assignment. No code was copied from other sources. The implementation uses standard Django and Django REST Framework patterns but all application logic is custom-built to meet the specific requirements.

## File Structure

```
code/
├── manage.py               # Django CLI
├── requirements.txt        # Dependencies
├── populate_data.py       # Data generator
├── README.md              # Documentation
├── .gitignore            # Git ignore rules
├── place_review_api/     # Project config
│   ├── settings.py       # Settings
│   ├── urls.py          # Root URLs
│   ├── wsgi.py          # WSGI config
│   └── asgi.py          # ASGI config
└── reviews/              # Main app
    ├── models.py         # Database models
    ├── serializers.py   # API serializers
    ├── views.py         # API views
    ├── urls.py          # App URLs
    ├── admin.py         # Admin config
    ├── backends.py      # Auth backend
    ├── tests.py         # Unit tests
    └── migrations/      # DB migrations
```

## Notes

- No UI is included as per requirements (API only)
- Database is SQLite (relational DB as required)
- No third-party services needed
- All features work with just web server + database
- Code is clean and production-ready
- Size is under 1MB (excluding database and migrations)

## Contact

If you have any questions about the implementation, please feel free to ask.

---
Thank you for reviewing my submission!
